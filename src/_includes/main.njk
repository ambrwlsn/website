{% from "macros/logoSVG.njk" import logoSVG %}
{% from "macros/twitterIconSVG.njk" import twitterIconSVG %}
{% from "macros/linkedInIconSVG.njk" import linkedInIconSVG %}

<!DOCTYPE html>
<html lang="en-GB">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="robots" content="index,follow"/>
		<title>{{ title }} | Amber Wilson</title>
		<meta name="description" content="{% if description -%}{{ description }}{% elif (excerpt) -%}{{ excerpt }}{% elif (postExcerpt) -%}{{ postExcerpt | trim }}{% elif (learnExcerpt) -%}{{ learnExcerpt | trim }}{% else -%}{{ page.url | log }}{% endif -%}"/>
		<link rel="canonical" href="{% if canonical -%}{{ canonical }}{% else -%}https://amberwilson.co.uk{{ page.url }}{% endif -%}"/>
		<link rel="icon" href="{{ '/img/favicon/favicon-32x32.png' | url }}"/>
		<meta name="keywords" content="{{ keywords }}{% if (keywords) and (tags) %},{% endif -%}{{ tags }}"/>
		<meta name="author" content="Amber Wilson"/>
		<meta name="publisher" content="Amber Wilson"/>
		<meta name="copyright" content="Amber Wilson"/>
		<meta property="og:title" content="{{ title }}"/>
		<meta property="og:type" content="website"/>
		<meta property="og:description" content="{% if description -%}{{ description }}{% elif (excerpt) -%}{{ excerpt }}{% elif (postExcerpt) -%}{{ postExcerpt | trim }}{% elif (learnExcerpt) -%}{{ learnExcerpt | trim }}{% endif -%}"/>
		<meta property="og:image" content="{% if ogImage -%}https://amberwilson.co.uk{{ page.url }}img/{{ ogImage }}{% else -%}https://amberwilson.co.uk/amber.png{% endif -%}"/>
		<meta property="og:url" content="{{ page.url }}"/>
		<meta itemProp="name" content="{{ title }}"/>
		<meta itemProp="description" content="{% if description -%}{{ description }}{% elif (excerpt) -%}{{ excerpt }}{% elif (postExcerpt) -%}{{ postExcerpt | trim }}{% elif (learnExcerpt) -%}{{ learnExcerpt | trim }}{% endif -%}"/>
		<meta name="twitter:card" content="summary"/>
		<meta name="twitter:image" property="og:image" content="{% if ogImage -%}https://amberwilson.co.uk{{ page.url }}img/{{ ogImage }}{% else -%}https://amberwilson.co.uk/amber.png{% endif -%}"/>
		<meta name="twitter:site" content="@ambrwlsn90"/>
		<meta name="twitter:site:id" content="790735158"/>
		<meta name="twitter:creator" content="@ambrwlsn90"/>
		<meta name="twitter:creator:id" content="790735158"/>
		<meta name="twitter:url" property="og:url" content="{{ page.url }}"/>
		<meta name="twitter:title" property="og:title" content="{{ title }}"/>
		<meta name="twitter:description" property="og:description" content="{% if description -%}{{ description }}{% elif (excerpt) -%}{{ excerpt }}{% elif (postExcerpt) -%}{{ postExcerpt | trim }}{% elif (learnExcerpt) -%}{{ learnExcerpt | trim }}{% endif -%}"/>
		<meta name="google-site-verification" content="SHot_oKOK_bWYZXg5ycCLHDcWmC_KENXV3EqQmW3yDw"/>
		<meta name="msapplication-TileColor" content="#da532c">
		<link rel="webmention" href="https://webmention.io/amberwilson.co.uk/webmention"/>
		<link rel="pingback" href="https://webmention.io/amberwilson.co.uk/xmlrpc"/>
		<link rel="mask-icon" href="/img/favicon/safari-pinned-tab.svg" color="#5bbad5">
		<link rel="apple-touch-icon" sizes="180x180" href="{{ '/img/favicon/apple-touch-icon.png' | url }}">
		<link rel="icon" type="image/png" sizes="32x32" href="{{ '/img/favicon/favicon-32x32.png' | url }}">
		<link rel="icon" type="image/png" sizes="16x16" href="{{ '/img/favicon/favicon-16x16.png' | url }}">
		<script>
			const html = document.getElementsByTagName("html")[0];
			var localStorageColorScheme = localStorage.getItem("color-scheme");
			var darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
			var prefersDarkMode = darkModeMediaQuery.matches;

			if (localStorageColorScheme) {
				html.setAttribute("class", localStorageColorScheme);
			}
		</script>
		{# <script type="module" src="./js/toggle.js"></script> #}
		<script async defer data-domain="amberwilson.co.uk" src="https://plausible.io/js/plausible.js"></script>
		<link rel="stylesheet" type="text/css" href="{{ '/css/minified.css' | url }}"/>
	</head>

	<body>

		<a class="skip-to-content-link" href="#main">Skip to main content</a>
		<nav id="main-nav">
			<a class="nav-logo-link" href="/">{{ logoSVG() }}</a>
			<a class="nav-blog-link {{ 'active' if '/blog' in page.url }}" href="{{ '/blog' | url }}">Blog</a>
			<a class="{{ 'active' if '/notes' in page.url }}" href="{{ '/notes' | url }}">Notes</a>
			<a class="{{ 'active' if '/learn' in page.url }}" href="{{ '/learn' | url }}">Learn</a>
			<a class="{{ 'active' if '/read' in page.url }}" href="{{ '/read' | url }}">Read</a>
			<a class="{{ 'active' if '/projects' in page.url }}" href="{{ '/projects' | url }}">Projects</a>
			<a class="{{ 'active' if '/about' in page.url }}" href="{{ '/about' | url }}">About</a>
			{# <web-toggle></web-toggle> #}
		</nav>

		<main id="main">
			{{ content | safe }}
		</main>
		{% if (page.url !== '/') %}
			<footer role="contentinfo">
				<p class="footer-info">Hi my name is Amber, and I am a web developer who wants to make the web pleasant for everyone to use. You can find me writing here, building at Ableton, on <a class="footer-link" rel="me" href="https://twitter.com/ambrwlsn90">
				Twitter
					<span>
							<svg
      xmlns="http://www.w3.org/2000/svg"
      width="15"
      height="15"
      viewBox="0 0 449.956 449.956"
	  aria-hidden="true"
      >
								<path
        d="M449.956 85.657c-17.702 7.614-35.408 12.369-53.102 14.279 19.985-11.991 33.503-28.931 40.546-50.819-18.281 10.847-37.787 18.268-58.532 22.267-18.274-19.414-40.73-29.125-67.383-29.125-25.502 0-47.246 8.992-65.24 26.98-17.984 17.987-26.977 39.731-26.977 65.235 0 6.851.76 13.896 2.284 21.128-37.688-1.903-73.042-11.372-106.068-28.407C82.46 110.158 54.433 87.46 31.403 59.101c-8.375 14.272-12.564 29.787-12.564 46.536 0 15.798 3.711 30.456 11.138 43.97 7.422 13.512 17.417 24.455 29.98 32.831-14.849-.572-28.743-4.475-41.684-11.708v1.142c0 22.271 6.995 41.824 20.983 58.674 13.99 16.848 31.645 27.453 52.961 31.833a95.543 95.543 0 0 1-24.269 3.138c-5.33 0-11.136-.475-17.416-1.42 5.9 18.459 16.75 33.633 32.546 45.535 15.799 11.896 33.691 18.028 53.677 18.418-33.498 26.262-71.66 39.393-114.486 39.393-8.186 0-15.607-.373-22.27-1.139 42.827 27.596 90.03 41.394 141.612 41.394 32.738 0 63.478-5.181 92.21-15.557 28.746-10.369 53.297-24.267 73.665-41.686 20.362-17.415 37.925-37.448 52.674-60.097 14.75-22.651 25.738-46.298 32.977-70.946 7.23-24.653 10.848-49.344 10.848-74.092 0-5.33-.096-9.325-.287-11.991 18.087-13.127 33.504-29.023 46.258-47.672z"
        fill="var(--textColor)"
/>
							</svg>
						</span>
					</a>, and on <a class="footer-link" rel="me" href="https://www.linkedin.com/in/ambrwlsn90/">
				LinkedIn
					<span>
							<svg
      xmlns="http://www.w3.org/2000/svg"
      width="15"
      height="15"
      viewBox="0 0 64 64"    
	  aria-hidden="true"
      >
								<path
         d="M-864-444h-64v-64h64v64Zm-39.5-40.7v33.4h10.4v-16.6a12.283,12.283,0,0,1,1.113-5.95c.989-1.783,2.653-2.65,5.088-2.65,5.3,0,5.3,5.355,5.3,8.9v16.2h10.3v-18.3c0-5.338-.7-8.83-2.263-11.325-1.931-3.079-5.247-4.575-10.138-4.575a11.922,11.922,0,0,0-6.25,1.688,9.749,9.749,0,0,0-3.55,3.712h-.1v-4.5Zm-17,0h0v33.3h10.3v-33.3Zm5.2-16.6a5.919,5.919,0,0,0-4.238,1.775A6.108,6.108,0,0,0-921.3-495.2a6.108,6.108,0,0,0,1.763,4.325A5.919,5.919,0,0,0-915.3-489.1a5.9,5.9,0,0,0,4.238-1.813A6.108,6.108,0,0,0-909.3-495.2a6.108,6.108,0,0,0-1.763-4.325A5.92,5.92,0,0,0-915.3-501.3Z"
      transform="translate(928 508)"
        fill="var(--textColor)"
/>
							</svg>
						</span>
					</a>.
				</p>
			</footer>
		{% endif %}
		<script>
			const inputMarkup = `
    <div class="checkbox-wrapper">
        <input type="checkbox" id="dark" name="dark">
        <span class="focus-outline"></span>
        <label for="dark">
            <span class="hidden">Light and Dark Mode Toggle</span>
        </label>
    </div>
    `

			const navElement = document.getElementById("main-nav");
			navElement.insertAdjacentHTML('beforeend', inputMarkup);

			const element = document.getElementById('dark');
			element.checked = localStorageColorScheme
				? localStorageColorScheme === "dark"
				: prefersDarkMode;

			element.addEventListener('click', function (event) {
				localStorage.setItem(
					"color-scheme", event.target.checked
					? "dark"
					: "light");
				if (event.target.checked) {
					html.setAttribute("class", "dark");
				} else {
					html.setAttribute("class", "light");
					element.checked = false;
				}
			}, false);

			darkModeMediaQuery.addListener(function callback(query) {
				if (!localStorageColorScheme) {
					element.checked = query.matches;
				}
			});
		</script>
	</body>

</html>